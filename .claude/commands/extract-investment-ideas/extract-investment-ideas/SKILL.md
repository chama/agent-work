---
name: extract-investment-ideas
description: >
  Xのブックマーク（JSON）から投資アイデアを抽出し、構造化されたmarkdownとして保存するスキル。
  ユーザーが「ブックマークから投資アイデアを抽出して」「ブックマークを分析して」「Xのブックマークを処理して」
  「投資アイデアを整理して」と言ったときに使う。analyses/01_x_bookmarks/ にJSONファイルがある場合や、
  投資アイデアの抽出・整理に関する作業全般で積極的に発動すること。
---

# X ブックマークから投資アイデアを抽出する

## 概要

Xでブックマークした投稿（JSON形式で `analyses/01_x_bookmarks/` に保存済み）を読み込み、
投資に関連するアイデアを抽出して `analyses/00_to_be_started/` にmarkdown形式で保存する。

投資と無関係なブックマーク（技術Tips、プロダクト更新情報など）はスキップする。

## ワークフロー

### 1. 入力ファイルの特定

ユーザーの指示に応じて対象を決める:

- **ディレクトリ一括**: `analyses/01_x_bookmarks/` 内の全JSONファイルを処理
- **ファイル指定**: ユーザーが指定した特定のJSONファイルのみ処理

処理済みかどうかは `analyses/00_to_be_started/` に同じアイデアが既に存在するかで判断し、
重複生成を避ける。

### 2. JSONの読み込みと投資関連性の判定

各JSONファイルから以下のフィールドを確認する:

- `text`: ツイート本文（最も重要）
- `entities.urls`: リンク先（参考情報源）
- `entities.annotations`: エンティティ認識結果
- `context_annotations`: Xが付与したトピック分類
- `referenced_tweets`: 引用元ツイート
- `article`: 記事データ（存在する場合）
- `created_at`: 投稿日時

**投資関連と判断する基準:**
- 特定の銘柄、セクター、資産クラスへの言及がある
- マクロ経済指標、政策変更、規制に関する情報がある
- 需給関係やバリューチェーンに影響する事象に触れている
- データソース（政府統計、業界レポート等）を紹介している
- 市場構造やトレンドの変化を示唆している

**スキップする基準:**
- 純粋な技術Tips（プログラミング、ツールの使い方）
- プロダクトの機能更新やリリース情報
- 投資や経済と無関係な日常的な内容

判断に迷う場合は、広めに拾って抽出する。ユーザーが後で取捨選択できる方が、
見落としよりも良い。

### 3. 投資アイデアの抽出と構造化

以下のテンプレートに従ってmarkdownを生成する:

```markdown
# IDEA: [アイデアの端的なタイトル]

## データソース

[元ツイートのURL、投稿者、投稿日時、ツイート内で言及されているデータソースやリンク]

## 根拠となった個所

[ツイート本文の中で、投資アイデアの根拠となる記述を引用・要約する]

[引用の後に1行で、どのような手法・アプローチなのかを端的にまとめる]

## 投資アイディア

[具体的な投資アクション。どの銘柄・セクター・資産クラスに、どういう方向で、なぜ投資するのか]

## 因果関係

[上昇・下落など複数シナリオを番号付きで列挙し、起点を太字にする。データの時間的優位性等の補足も追記する]

例:
1. **野菜価格上昇** → 原材料コスト増加 → 外食・食品加工企業の利益率悪化 → 株価下落
2. **野菜価格下落** → 原材料コスト減少 → 外食・食品加工企業の利益率改善 → 株価上昇
3. 農水省のデータは週次で更新されるため、四半期決算に先立って業績変化を予測できる可能性がある
```

**抽出のポイント:**
- タイトルは短く具体的に。「野菜価格高騰 × 食品セクター」のように対象と方向性が伝わるもの
- データソースにはツイートのURL (`https://x.com/i/status/{id}`) を必ず含める
- 根拠は元ツイートの内容を引用した後、1行で「どのような手法・アプローチか」の概要を添える。引用は忠実に、概要は簡潔に
- 投資アイディアは元ツイートから読み取れる範囲で具体的に書く。推測が入る場合は明示する
- 因果関係は**上昇・下落など複数のシナリオを番号付きで明示する**。各シナリオの起点を太字にし、矢印（→）で連鎖を表現する。さらにデータの更新頻度や時間的優位性など、そのアイデアを実行する上での補足情報があれば追記する

### 4. ファイルの保存

出力先: `analyses/00_to_be_started/`（ディレクトリが無ければ作成する）

ファイル名の規則: `YYYYMMDD_topic_keyword.md`
- 日付はツイートの `created_at` から取得
- topicは英語のスネークケースで、アイデアの内容を端的に表す

**例:**
- `20251209_vegetable_price_food_sector.md`
- `20260115_china_ev_battery_supply.md`

### 5. 処理結果の報告

全ファイルの処理が完了したら、以下を報告する:

- 処理したJSONファイル数
- 投資アイデアとして抽出した件数
- スキップした件数とその理由の概要
- 生成したファイルの一覧

## 注意事項

- 元ツイートの内容を超えた投資判断は行わない。あくまで「アイデアの種」を整理する役割
- 引用元ツイート (`referenced_tweets`) がある場合、その内容も可能なら参照して文脈を補完する
- 同一ツイートから複数の投資アイデアが読み取れる場合は、別々のファイルに分ける
